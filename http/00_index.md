# HTTP

## http（Hypertext Transfer Protocol）
> 超文本传输协议。html超文本标记语言，HTTP是浏览器中最重要且使用最多的**协议**，它不仅是**浏览器与服务端的通信语言**，更是互联网的基石。
  + 超文本：超越文本，支持图片，视频，等等从一个链接到另一个视频
  + 传输：数据的传输，分为请求方（请求报文）和响应方（响应报文）
  + 协议：遵循的规则

## http报文结构
  + 请求报文
    - 请求头
    ```
      请求方法，请求路径，协议版本
      请求头

      请求体
    ```
  + 响应报文
    ```
      协议版本，响应状态码，响应信息
      响应头

      响应体
    ```
## http方法
  + GET （请求服务器某一资源）
  + POST （提交数据，上传数据） *
  + PUT （一般用来做表单提交）
  + DELETE （删除服务器某一资源）
  + HEAD （获取资源的元信息）首先返回基本信息，然后根据基本信息抉择是否下载。 *
  + OPTIONS （获取某一资源可访问的方法）

  ### GET和POST的区别
    1. 缓存：get会被浏览器主动缓存，而post不会
    2. 参数：get的参数会用&拼接在url后面，而post是附加在body里面
    3. tcp：get会这一次性发送，post会分两次，第一次发送请求报文的头部，等待服务器响应100，在发送请求报文体（post我没遇见过，可能有小部分会分两次，不是http的事情）
    4. get幂等类型，有幂等类型的数据，最好用get请求，因为get请求会被浏览器默认缓存，给服务器缓解压力。


## uri和url
  + uri （统一资源定位符）是一种抽象的概念，表示标志一个资源一串字符
  + url （访问的路径）是uri概念的具体实现，通过字符串访问一个地址上个某一个资源
    + 构成：协议://ip:端口/路径/query/锚点
  - urn 通过唯一的id绑定一个资源，不论位置移动到了哪里，都可以直接访问

## http状态码
  + 1** （成功，但还需要继续执行）
  + 2** （请求成功）
  + 3** （资源重定向）
    - 301 资源永久重定向
    - 302 资源临时重定向
    - 304 采用缓存
  + 4** （客户端错误）
    - 404 资源找不到
    - 413 请求体太大
  + 5** （服务器端错误）

## http的状态和缺点
  + 状态
    - 灵活，支持多种数据格式（引出下一段）
    - 无状态，每次请求都是一个独立的请求
    - 可靠传输，基于tcp链接
  + 缺点
    - 无状态，需要我们额外传入一些字段，去表示用户的身份什么的
    - 明文传输，数据可能被劫持

## http 1.0 / 1.1 / 2.0 的区别
> 1.0
  - 支持中GET，POST
> 1.1
  - 新增了HEAD, DELETE, PUT, OPTIONS等等方法
  - 支持场链接，keep-alive
  - 断点续传，通过rang字段控制本次传输内容大小
> 2.0
  - 支持http压缩头部，进行二进制传输
  - 多路复用，同时发送多个请求，不需要等待
    - 明文传输，容易配破解，可以造成信息的泄露

## http支持格式
  > 请求头中有个字段content-type 指定了内容的格式
    - text  text/html text/css text/plain
    - image  image/png image/gif
    - audio/vedio  audio/mp3 vedio/mp4
    - multipart/form-data 表单有文件上传
    - appication/x-form-urlencodeed： 普通表单类型 pdf, json javascript
    - multipart/byteranges，boundary=010101010101 分段获取数据，后面为分隔符 （引出分段获取内容）

## 数据压缩格式
- content-encoding: gzip / deflate / br
  - deflate 采用了哈夫曼编码的无损数据的压缩算法

## http不定内容传输
  > 基于长连接多次发送数据，会使content-type失效
  - transfer-encoding：chunked

## http获取大数据
  > range字段，设置每次获取的大小，
  ``` JS
    range: bitys=0-9
  ```
    - 范围符合则返回206
    - 范围不符合则返回416

## 同源和跨域
  > 在协议，ip，端口三者都相同的情况下，则为同源，可以直接访问资源；只要有一者不同，则为非同源需要跨域访问
  > 浏览器会在请求中添加origin字段，标志从那个源发送请求，后端在control-allow-origin中查找是否存在，存在即可以跨域
  + nginx反向代理，可以通过nginx把我们的请求反向代理到需要的服务器上，即可以解决
  + jsonp 例如script的src标签不受同源政策的影响，在url中设置回调函数，在回调函数中拿到需要的数据，缺点src支持get方法

## ajax练习（ajax.js）
