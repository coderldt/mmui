# second

## TCP和UDP
### 连接
- TCP 是面向连接的传输层协议，**传输数据前先要建立连接**。
- UDP 是不需要连接，**即刻传输**数据。

### 服务对象
- TCP 是**一对一**的两点服务，即一条连接只有两个端点。
- UDP 支持**一对一、一对多、多对多**的交互通信

### 可靠性
- TCP 是**可靠交付**数据的，数据可以无差错、不丢失、不重复、按需到达。
- UDP 是尽**最大努力交付，不保证可靠交付数据**。

### 拥塞控制、流量控制
- TCP 有拥塞控制和流量控制机制，保证数据传输的安全性。
- UDP 则没有，即使网络非常拥堵了，也不会影响 UDP 的发送速率。

### 首部开销
- TCP 首部长度较长，会有一定的开销，首部在没有使用「选项」字段时是 20 个字节，如果使用了「选项」字段则会变长的。
- UDP 首部只有 8 个字节，并且是固定不变的，开销较小。
传输方式

- TCP 是流式传输，没有边界，但保证顺序和可靠。
- UDP 是一个包一个包的发送，是有边界的，但可能会丢包和乱序。

### 分片不同
- TCP 的数据大小如果大于 MSS 大小，则会在传输层进行分片，目标主机收到后，也同样在传输层组装 TCP 数据包，如果中途丢失了一个分片，只需要传输丢失的这个分片。
- UDP 的数据大小如果大于 MTU 大小，则会在 IP 层进行分片，目标主机收到后，在 IP 层组装完数据，接着再传给传输层，但是如果中途丢了一个分片，则就需要重传所有的数据包，这样传输效率非常差，所以通常 UDP 的报文应该小于 MTU。

## 三次握手和四次挥手
> 握手：**通过三次握手的过程，双方就可以确认对方能够接受到自己的消息，并作出答复，能确认有接受和发送的能力**
  - 客户端首次发送连接请求
  - 服务端接受连接请求，并发送确认收到信息的答复
  - 客服端收到确认信息的答复，连接成功，开始发送数据包
> 挥手：**通过四次挥手的过程，双方可以确认自己不在发送数据，对方也不在发送数据，就断开了，四次是因为 双方都会发送表示自己不会再发送数据的报文，对方也必须回复收到该报文的报文。**
  - 客户端发送断开链接请求
  - 服务端接受断开请求，返回确认收到请求的答复
  - 服务端过段时间内发送断开消息给客服端，并断开链接
  - 客户端收到服务端断开连接消息，也断开连接
